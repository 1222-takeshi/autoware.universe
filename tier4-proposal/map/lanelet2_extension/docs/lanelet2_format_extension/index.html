
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://autowarefoundation.github.io/autoware.universe/tier4-proposal/map/lanelet2_extension/docs/lanelet2_format_extension/">
      
      <link rel="icon" href="../../../../docs/assets/images/autoware-foundation.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.2">
    
    
      
        <title>Modifying Lanelet2 format for Autoware - Autoware Universe Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.816931ca.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../docs/assets/css/extra.css">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    
    <script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../../../..":"../../../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script>
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modifying-lanelet2-format-for-autoware" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Autoware Universe Documentation" class="md-header__button md-logo" aria-label="Autoware Universe Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Autoware Universe Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modifying Lanelet2 format for Autoware
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/autowarefoundation/autoware.universe/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      autoware.universe
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../common/autoware_utils/" class="md-tabs__link">
        Common
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../control/shift_decider/" class="md-tabs__link">
        Control
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Map
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../messages/" class="md-tabs__link">
        Messages
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../system/topic_state_monitor/Readme/" class="md-tabs__link">
        System
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Autoware Universe Documentation" class="md-nav__button md-logo" aria-label="Autoware Universe Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"/></svg>

    </a>
    Autoware Universe Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/autowarefoundation/autoware.universe/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        autoware.universe
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Common
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Common" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" data-md-state="indeterminate" type="checkbox" id="__nav_2_1" checked>
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../common/autoware_utils/">Autoware utils</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Autoware utils" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Autoware utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" data-md-state="indeterminate" type="checkbox" id="__nav_2_2" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Goal distance calculator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Goal distance calculator" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Goal distance calculator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/goal_distance_calculator/Readme/" class="md-nav__link">
        goal_distance_calculator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" data-md-state="indeterminate" type="checkbox" id="__nav_2_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Path distance calculator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Path distance calculator" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Path distance calculator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/path_distance_calculator/Readme/" class="md-nav__link">
        path_distance_calculator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Control" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" data-md-state="indeterminate" type="checkbox" id="__nav_3_1" checked>
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../control/shift_decider/">Shift decider</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Shift decider" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Shift decider
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Map
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Map" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Map
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">Lanelet2 extension</a>
          
            <label for="__nav_4_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Lanelet2 extension" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Lanelet2 extension
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_2" type="checkbox" id="__nav_4_1_2" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_2">
          Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docs" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_1_2">
          <span class="md-nav__icon md-icon"></span>
          Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extra_lanelet_subtypes/" class="md-nav__link">
        Extra Lanelet Subtypes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extra_regulatory_elements/" class="md-nav__link">
        Extra Regulatory Elements
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Modifying Lanelet2 format for Autoware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Modifying Lanelet2 format for Autoware
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mandatory-tags" class="md-nav__link">
    Mandatory Tags
  </a>
  
    <nav class="md-nav" aria-label="Mandatory Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elevation-tags" class="md-nav__link">
    Elevation Tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trafficlights" class="md-nav__link">
    TrafficLights
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-directions" class="md-nav__link">
    Turn Directions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-taggings" class="md-nav__link">
    Optional Taggings
  </a>
  
    <nav class="md-nav" aria-label="Optional Taggings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#meta-info" class="md-nav__link">
    Meta Info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-coordinate-expression" class="md-nav__link">
    Local Coordinate Expression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#light-bulbs-in-traffic-lights" class="md-nav__link">
    Light Bulbs in Traffic Lights
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" data-md-state="indeterminate" type="checkbox" id="__nav_4_2" checked>
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../map_loader/">Map loader</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Map loader" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Map loader
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" data-md-state="indeterminate" type="checkbox" id="__nav_4_3" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Map tf generator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Map tf generator" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Map tf generator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../map_tf_generator/Readme/" class="md-nav__link">
        map_tf_generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../messages/">Messages</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Messages" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Messages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" data-md-state="indeterminate" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          System
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="System" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          System
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" data-md-state="indeterminate" type="checkbox" id="__nav_6_1" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Topic state monitor
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Topic state monitor" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Topic state monitor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../system/topic_state_monitor/Readme/" class="md-nav__link">
        topic_state_monitor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mandatory-tags" class="md-nav__link">
    Mandatory Tags
  </a>
  
    <nav class="md-nav" aria-label="Mandatory Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elevation-tags" class="md-nav__link">
    Elevation Tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trafficlights" class="md-nav__link">
    TrafficLights
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-directions" class="md-nav__link">
    Turn Directions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-taggings" class="md-nav__link">
    Optional Taggings
  </a>
  
    <nav class="md-nav" aria-label="Optional Taggings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#meta-info" class="md-nav__link">
    Meta Info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-coordinate-expression" class="md-nav__link">
    Local Coordinate Expression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#light-bulbs-in-traffic-lights" class="md-nav__link">
    Light Bulbs in Traffic Lights
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/autowarefoundation/autoware.universe/edit/main/map/lanelet2_extension/docs/lanelet2_format_extension.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="modifying-lanelet2-format-for-autoware">Modifying Lanelet2 format for Autoware<a class="headerlink" href="#modifying-lanelet2-format-for-autoware" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>About the basics of the default format, please refer to main <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2">Lanelet2 repository</a>. (see <a href="https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_core/doc/LaneletPrimitives.md">here</a> about primitives)</p>
<p>In addition to default Lanelet2 Format, users should add following mandatory/optional tags to their osm lanelet files as explained in reset of this document.
Users may use <code>autoware_lanelet2_validation</code> <a href="../../#nodes">node</a> to check if their maps are valid.</p>
<p>The following is the extra format added for Autoware:</p>
<ul>
<li><a href="../extra_regulatory_elements/">extra regulatory elements</a><ul>
<li>Detection Area</li>
<li>Road Marking</li>
</ul>
</li>
<li><a href="../extra_lanelet_subtypes/">extra lanelet subtype</a><ul>
<li>Roadside Lane</li>
</ul>
</li>
</ul>
<h2 id="mandatory-tags">Mandatory Tags<a class="headerlink" href="#mandatory-tags" title="Permanent link">#</a></h2>
<h3 id="elevation-tags">Elevation Tags<a class="headerlink" href="#elevation-tags" title="Permanent link">#</a></h3>
<p>Elevation("ele") information for points(<code>node</code>) is optional in default Lanelet2 format.
However, some of Autoware packages(e.g. trafficlight_recognizer) need elevation to be included in HD map. Therefore, users must make sure that all points in their osm maps contain elevation tags.</p>
<p>Here is an example osm syntax for node object.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&#39;1&#39;</span> <span class="na">visible=</span><span class="s">&#39;true&#39;</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;49.00501435943&#39;</span> <span class="na">lon=</span><span class="s">&#39;8.41687458512&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;3.0&#39;</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- this tag is mandatory for Autoware!! --&gt;</span>
<span class="nt">&lt;/node&gt;</span>
</code></pre></div>
<h3 id="trafficlights">TrafficLights<a class="headerlink" href="#trafficlights" title="Permanent link">#</a></h3>
<p>Default Lanelet2 format uses LineString(<code>way</code>) or Polygon class to represent the shape of a traffic light. For Autoware, traffic light objects must be represented only by LineString to avoid confusion, where start point is at bottom left edge and end point is at bottom right edge. Also, "height" tag must be added in order to represent the size in vertical direction (not the position).</p>
<p>The Following image illustrates how LineString is used to represent shape of Traffic Light in Autoware.
<img alt="How LineString is used to represent shape of Traffic Light in Autoware" src="../traffic_light.png" /></p>
<p>Here is an example osm syntax for traffic light object.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;way</span> <span class="na">id=</span><span class="s">&#39;13&#39;</span> <span class="na">visible=</span><span class="s">&#39;true&#39;</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;nd</span> <span class="na">ref=</span><span class="s">&#39;6&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;nd</span> <span class="na">ref=</span><span class="s">&#39;5&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;type&#39;</span> <span class="na">v=</span><span class="s">&#39;traffic_light&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;subtype&#39;</span> <span class="na">v=</span><span class="s">&#39;red_yellow_green&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;height&#39;</span> <span class="na">v=</span><span class="s">&#39;0.5&#39;</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- this tag is mandatory for Autoware!! --&gt;</span>
<span class="nt">&lt;/way&gt;</span>
</code></pre></div>
<h3 id="turn-directions">Turn Directions<a class="headerlink" href="#turn-directions" title="Permanent link">#</a></h3>
<p>Users must add "turn_direction" tags to lanelets within intersections to indicate vehicle's turning direction. You do not need this tags for lanelets that are not in intersections. If you do not have this tag, Autoware will not be able to light up turning indicators.
This tags only take following values:</p>
<ul>
<li>left</li>
<li>right</li>
<li>straight</li>
</ul>
<p>Following image illustrates how lanelets should be tagged.</p>
<p><img alt="Turn Directions: How lanelets should be tagged" src="../turn_direction.png" /></p>
<p>Here is an example of osm syntax for lanelets in intersections.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;relation</span> <span class="na">id=</span><span class="s">&#39;1&#39;</span> <span class="na">visible=</span><span class="s">&#39;true&#39;</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;way&#39;</span> <span class="na">ref=</span><span class="s">&#39;2&#39;</span> <span class="na">role=</span><span class="s">&#39;left&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;way&#39;</span> <span class="na">ref=</span><span class="s">&#39;3&#39;</span> <span class="na">role=</span><span class="s">&#39;right&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;relation&#39;</span> <span class="na">ref=</span><span class="s">&#39;4&#39;</span> <span class="na">role=</span><span class="s">&#39;regulatory_element&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;location&#39;</span> <span class="na">v=</span><span class="s">&#39;urban&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;one_way&#39;</span> <span class="na">v=</span><span class="s">&#39;yes&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;subtype&#39;</span> <span class="na">v=</span><span class="s">&#39;road&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;type&#39;</span> <span class="na">v=</span><span class="s">&#39;lanelet&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;turn_direction&#39;</span> <span class="na">v=</span><span class="s">&#39;left&#39;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- this tag is mandatory for lanelets at intersections!! --&gt;</span>
<span class="nt">&lt;/relation&gt;</span>
</code></pre></div>
<h2 id="optional-taggings">Optional Taggings<a class="headerlink" href="#optional-taggings" title="Permanent link">#</a></h2>
<p>Following tags are optional tags that you may want to add depending on how you want to use your map in Autoware.</p>
<h3 id="meta-info">Meta Info<a class="headerlink" href="#meta-info" title="Permanent link">#</a></h3>
<p>Users may add the <code>MetaInfo</code> element to their OSM file to indicate format version and map version of their OSM file. This information is not meant to influence Autoware vehicle's behavior, but is published as ROS message so that developers could know which map was used from ROSBAG log files. MetaInfo elements exists in the same hierarchy with <code>node</code>, <code>way</code>, and <code>relation</code> elements, otherwise JOSM wouldn't be able to load the file correctly.</p>
<p>Here is an example of MetaInfo in osm file:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;osm</span> <span class="na">version=</span><span class="s">&#39;0.6&#39;</span> <span class="na">generator=</span><span class="s">&#39;JOSM&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;MetaInfo</span> <span class="na">format_version=</span><span class="s">&#39;1.0&#39;</span> <span class="na">map_version=</span><span class="s">&#39;1.0&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;node&gt;</span>...<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;way&gt;</span>...<span class="nt">&lt;/way&gt;</span>
  <span class="nt">&lt;relation&gt;</span>...<span class="nt">&lt;/relation&gt;</span>
<span class="nt">&lt;/osm&gt;</span>
</code></pre></div>
<h3 id="local-coordinate-expression">Local Coordinate Expression<a class="headerlink" href="#local-coordinate-expression" title="Permanent link">#</a></h3>
<p>Sometimes users might want to create Lanelet2 maps that are not georeferenced.
In such a case, users may use "local_x", "local_y" taggings to express local positions instead of latitude and longitude.
Autoware Osm Parser will overwrite x,y positions with these tags when they are present.
For z values, use "ele" tags as default Lanelet2 Format.
You would still need to fill in lat and lon attributes so that parser does not crush, but their values could be anything.</p>
<p>Here is example <code>node</code> element in osm with "local_x", "local_y" taggings:</p>
<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- lat/lon attributes are required, but their values can be anything --&gt;</span>
<span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&#39;40648&#39;</span> <span class="na">visible=</span><span class="s">&#39;true&#39;</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;0&#39;</span> <span class="na">lon=</span><span class="s">&#39;0&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;local_x&#39;</span> <span class="na">v=</span><span class="s">2.54&#39;/</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;local_y&#39;</span> <span class="na">v=</span><span class="s">4.38&#39;/</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;3.0&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
</code></pre></div>
<h3 id="light-bulbs-in-traffic-lights">Light Bulbs in Traffic Lights<a class="headerlink" href="#light-bulbs-in-traffic-lights" title="Permanent link">#</a></h3>
<p>Default Lanelet format can only express shape (base + height) of traffic lights.
However, region_tlr node in Autoware uses positions of each light bulbs to recognize color of traffic light. If users may wish to use this node, "light_bulbs"(<code>way</code>) element must be registered to traffic_light regulatory_element object define position and color of each light bulb in traffic lights. If you are using other trafficlight_recognizer nodes(e.g. tlr_mxnet), which only uses bounding box of traffic light, then you do not need to add this object.</p>
<p>"light_bulbs" object is defined using LineString(<code>way</code>), and each node of line string is placed at the center of each light bulb. Also, each node should have "color" and optionally "arrow" tags to describe its type. Also, "traffic_light_id" tag is used to indicate which ID of relevant traffic_light element.</p>
<p>"color" tag is used to express the color of the light bulb. Currently only three values are used:</p>
<ul>
<li>red</li>
<li>yellow</li>
<li>green</li>
</ul>
<p>"arrow" tag is used to express the direction of the arrow of light bulb:</p>
<ul>
<li>up</li>
<li>right</li>
<li>left</li>
<li>up_right</li>
<li>up_left</li>
</ul>
<p>Following image illustrates how "light_bulbs" LineString should be created.</p>
<p><img alt="How &quot;light_bulbs&quot; LineString should be created" src="../light_bulbs.png" /></p>
<p>Here is an example of osm syntax for light_bulb object:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">1</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;49.00541994701&#39;</span> <span class="na">lon=</span><span class="s">&#39;8.41565013855&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;5&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;color&#39;</span> <span class="na">v=</span><span class="s">&#39;red&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">2</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;49.00542091657&#39;</span> <span class="na">lon=</span><span class="s">&#39;8.4156469497&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;5&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;color&#39;</span> <span class="na">v=</span><span class="s">&#39;yellow&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">3</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;49.00542180052&#39;</span> <span class="na">lon=</span><span class="s">&#39;8.41564400223&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;5&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;color&#39;</span> <span class="na">v=</span><span class="s">&#39;green&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">3</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span> <span class="na">lat=</span><span class="s">&#39;49.00542180052&#39;</span> <span class="na">lon=</span><span class="s">&#39;8.41564400223&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;ele&#39;</span> <span class="na">v=</span><span class="s">&#39;4.6&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;color&#39;</span> <span class="na">v=</span><span class="s">&#39;green&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">arrow</span> <span class="na">v=</span><span class="s">&#39;right&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;way</span> <span class="na">id=</span><span class="s">11</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;nd</span> <span class="na">ref=</span><span class="s">1</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;nd</span> <span class="na">ref=</span><span class="s">2</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;nd</span> <span class="na">ref=</span><span class="s">3</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;traffic_light_id&#39;</span> <span class="na">v=</span><span class="s">&#39;10&#39;</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- id of linestring with type=&quot;traffic_light&quot; --&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;type&#39;</span> <span class="na">v=</span><span class="s">&#39;light_bulbs&#39;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/way&gt;</span>
</code></pre></div>
<p>After creating "light_bulbs" elements, you have to register them to traffic_light regulatory element as role "light_bulbs".
The following illustrates how light_bulbs are registered to traffic_light regulatory elements.</p>
<p><img alt="How light_bulbs are registered to traffic_light regulatory elements" src="../traffic_light_regulatory_element.png" /></p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;relation</span> <span class="na">id=</span><span class="s">&#39;8&#39;</span> <span class="na">visible=</span><span class="s">&#39;true&#39;</span> <span class="na">version=</span><span class="s">&#39;1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;type&#39;</span> <span class="na">v=</span><span class="s">&#39;regulatory_element&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;tag</span> <span class="na">k=</span><span class="s">&#39;subtype&#39;</span> <span class="na">v=</span><span class="s">&#39;traffic_light&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;way&#39;</span> <span class="na">ref=</span><span class="s">&#39;9&#39;</span> <span class="na">role=</span><span class="s">&#39;ref_line&#39;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;way&#39;</span> <span class="na">ref=</span><span class="s">&#39;10&#39;</span> <span class="na">role=</span><span class="s">&#39;refers&#39;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- refers to the traffic light line string --&gt;</span>
  <span class="nt">&lt;member</span> <span class="na">type=</span><span class="s">&#39;way&#39;</span> <span class="na">ref=</span><span class="s">&#39;11&#39;</span> <span class="na">role=</span><span class="s">&#39;light_bulbs&#39;</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- refers to the light_bulb line string --&gt;</span>
<span class="nt">&lt;/relation&gt;</span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../extra_regulatory_elements/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Extra Regulatory Elements" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Extra Regulatory Elements
            </div>
          </div>
        </a>
      
      
        
        <a href="../../../map_loader/" class="md-footer__link md-footer__link--next" aria-label="Next: map_loader package" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              map_loader package
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 The Autoware Foundation
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.expand", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.01824240.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.ff0eccb3.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>